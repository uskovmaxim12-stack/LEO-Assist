<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEO ASSISTANT - Умный помощник 7Б класса</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ДОПОЛНИТЕЛЬНЫЕ СТИЛИ ДЛЯ ИСПРАВЛЕНИЯ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Arial, sans-serif;
        }
        
        body {
            background: #0a0a0a;
            color: white;
            min-height: 100vh;
            overflow: hidden;
        }
        
        .neuron {
            transition: all 0.3s ease;
        }
        
        .neuron:hover {
            transform: scale(1.2);
        }
        
        /* Анимации для нейронов */
        @keyframes pulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        .float {
            animation: float 3s infinite;
        }
    </style>
</head>
<body>
    <!-- КОНТЕЙНЕР ДЛЯ ЧАСТИЦ -->
    <div id="particles-js"></div>
    
    <div class="main-container">
        <!-- ЛЕВАЯ ПАНЕЛЬ С НЕЙРОСЕТЬЮ -->
        <div class="left-panel">
            <div class="neural-network">
                <h1><i class="fas fa-brain"></i> LEO ASSISTANT</h1>
                <p class="subtitle">Умный помощник для 7Б класса</p>
                
                <!-- ВИЗУАЛИЗАЦИЯ НЕЙРОСЕТИ -->
                <div class="neural-visualization">
                    <!-- Динамические нейроны будут добавлены через JS -->
                    <canvas id="neural-canvas"></canvas>
                </div>
                
                <div class="features">
                    <div class="feature">
                        <i class="fas fa-robot"></i>
                        <span>AI-помощник</span>
                    </div>
                    <div class="feature">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Расписание уроков</span>
                    </div>
                    <div class="feature">
                        <i class="fas fa-tasks"></i>
                        <span>Задания</span>
                    </div>
                    <div class="feature">
                        <i class="fas fa-gamepad"></i>
                        <span>Образовательные игры</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ПРАВАЯ ПАНЕЛЬ С ФОРМОЙ -->
        <div class="right-panel">
            <div class="auth-container">
                <!-- ВКЛАДКИ -->
                <div class="auth-tabs">
                    <button class="tab-btn active" id="loginTab">
                        <i class="fas fa-sign-in-alt"></i> Вход
                    </button>
                    <button class="tab-btn" id="registerTab">
                        <i class="fas fa-user-plus"></i> Регистрация
                    </button>
                    <button class="tab-btn admin-btn" id="adminTab">
                        <i class="fas fa-shield-alt"></i> Админ
                    </button>
                </div>
                
                <!-- ФОРМА ВХОДА -->
                <div class="auth-form active" id="loginForm">
                    <h2>Вход в систему</h2>
                    <p class="form-subtitle">Введите ваши данные для доступа</p>
                    
                    <div class="input-group">
                        <i class="fas fa-user"></i>
                        <input type="text" id="loginUsername" placeholder="Логин" required>
                    </div>
                    
                    <div class="input-group">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="loginPassword" placeholder="Пароль" required>
                        <button type="button" class="show-password" id="showLoginPassword">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    
                    <div class="form-options">
                        <label class="checkbox">
                            <input type="checkbox" id="rememberMe">
                            <span>Запомнить меня</span>
                        </label>
                        <a href="#" class="forgot-password">Забыли пароль?</a>
                    </div>
                    
                    <button class="submit-btn" id="loginSubmit">
                        <i class="fas fa-paper-plane"></i> Войти в систему
                    </button>
                    
                    <div class="demo-login">
                        <p>Тестовый доступ:</p>
                        <button class="demo-btn" data-login="demo" data-password="demo123">
                            <i class="fas fa-user-check"></i> Демо-вход
                        </button>
                    </div>
                </div>
                
                <!-- ФОРМА РЕГИСТРАЦИИ -->
                <div class="auth-form" id="registerForm">
                    <h2>Регистрация</h2>
                    <p class="form-subtitle">Создайте новый аккаунт</p>
                    
                    <div class="input-group">
                        <i class="fas fa-id-card"></i>
                        <input type="text" id="regFullname" placeholder="Фамилия и Имя" required>
                    </div>
                    
                    <div class="input-group">
                        <i class="fas fa-at"></i>
                        <input type="text" id="regUsername" placeholder="Придумайте логин" required>
                    </div>
                    
                    <div class="input-group">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="regPassword" placeholder="Придумайте пароль" required>
                    </div>
                    
                    <div class="input-group">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="regPasswordConfirm" placeholder="Повторите пароль" required>
                    </div>
                    
                    <div class="form-checkbox">
                        <input type="checkbox" id="agreeTerms" required>
                        <label for="agreeTerms">
                            Я согласен с <a href="#">правилами системы</a>
                        </label>
                    </div>
                    
                    <button class="submit-btn" id="registerSubmit">
                        <i class="fas fa-user-plus"></i> Зарегистрироваться
                    </button>
                    
                    <p class="form-note">
                        После регистрации аккаунт нужно активировать у администратора
                    </p>
                </div>
                
                <!-- ФОРМА АДМИНА -->
                <div class="auth-form" id="adminForm">
                    <h2>Административный доступ</h2>
                    <p class="form-subtitle">Только для администраторов системы</p>
                    
                    <div class="admin-warning">
                        <i class="fas fa-exclamation-triangle"></i>
                        <p>Доступ только для учителей и администраторов</p>
                    </div>
                    
                    <div class="input-group">
                        <i class="fas fa-key"></i>
                        <input type="password" id="adminKey" placeholder="Административный ключ" required>
                    </div>
                    
                    <div class="input-group">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="adminPassword" placeholder="Пароль администратора" required>
                    </div>
                    
                    <button class="submit-btn warning" id="adminSubmit">
                        <i class="fas fa-shield-alt"></i> Войти в админ-панель
                    </button>
                </div>
                
                <!-- СООБЩЕНИЯ -->
                <div id="authMessage" class="message-box"></div>
                
                <!-- СТАТИСТИКА СИСТЕМЫ -->
                <div class="system-info">
                    <div class="info-item">
                        <i class="fas fa-users"></i>
                        <span id="onlineCount">0</span> онлайн
                    </div>
                    <div class="info-item">
                        <i class="fas fa-check-circle"></i>
                        <span id="activeUsers">0</span> активных
                    </div>
                    <div class="info-item">
                        <i class="fas fa-server"></i>
                        Система: <span class="status online">online</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- СКРИПТЫ -->
    <script src="./js/particles.min.js"></script>
    <script src="./js/auth-system.js"></script>
    <script>
        // ИНИЦИАЛИЗАЦИЯ СИСТЕМЫ
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Страница загружена');
            
            // 1. ИНИЦИАЛИЗАЦИЯ ЧАСТИЦ
            particlesJS.load('particles-js', './js/particles-config.json', function() {
                console.log('✅ Частицы загружены');
            });
            
            // 2. ПЕРЕКЛЮЧЕНИЕ ВКЛАДОК (ИСПРАВЛЕННЫЙ КОД)
            const tabs = {
                'loginTab': 'loginForm',
                'registerTab': 'registerForm', 
                'adminTab': 'adminForm'
            };
            
            // Обработчик для всех вкладок
            Object.keys(tabs).forEach(tabId => {
                const tab = document.getElementById(tabId);
                const form = document.getElementById(tabs[tabId]);
                
                if (tab && form) {
                    tab.addEventListener('click', function() {
                        console.log('Нажата вкладка:', tabId);
                        
                        // Сбрасываем все активные состояния
                        document.querySelectorAll('.tab-btn').forEach(t => {
                            t.classList.remove('active');
                        });
                        document.querySelectorAll('.auth-form').forEach(f => {
                            f.classList.remove('active');
                        });
                        
                        // Активируем выбранную
                        this.classList.add('active');
                        form.classList.add('active');
                        
                        // Плавное появление
                        form.style.opacity = '0';
                        setTimeout(() => {
                            form.style.opacity = '1';
                            form.style.transition = 'opacity 0.3s';
                        }, 10);
                    });
                }
            });
            
            // 3. ПОКАЗАТЬ/СКРЫТЬ ПАРОЛЬ
            document.getElementById('showLoginPassword')?.addEventListener('click', function() {
                const input = document.getElementById('loginPassword');
                const icon = this.querySelector('i');
                
                if (input.type === 'password') {
                    input.type = 'text';
                    icon.className = 'fas fa-eye-slash';
                } else {
                    input.type = 'password';
                    icon.className = 'fas fa-eye';
                }
            });
            
            // 4. ДЕМО-ВХОД
            document.querySelector('.demo-btn')?.addEventListener('click', function() {
                const login = this.getAttribute('data-login');
                const password = this.getAttribute('data-password');
                
                document.getElementById('loginUsername').value = login;
                document.getElementById('loginPassword').value = password;
                
                // Автоматический клик по кнопке входа
                setTimeout(() => {
                    document.getElementById('loginSubmit').click();
                }, 100);
            });
            
            // 5. АВТОМАТИЧЕСКАЯ ФОКУСИРОВКА
            setTimeout(() => {
                const activeInput = document.querySelector('.auth-form.active .input-group input');
                if (activeInput) {
                    activeInput.focus();
                }
            }, 500);
            
            // 6. ОБНОВЛЕНИЕ СТАТИСТИКИ
            updateSystemStats();
            setInterval(updateSystemStats, 30000);
        });
        
        function updateSystemStats() {
            try {
                const users = JSON.parse(localStorage.getItem('leo_users') || '[]');
                const activeUsers = users.filter(u => u.active).length;
                
                document.getElementById('onlineCount').textContent = 
                    Math.min(activeUsers + Math.floor(Math.random() * 5), 30);
                document.getElementById('activeUsers').textContent = activeUsers;
            } catch(e) {
                console.log('Ошибка обновления статистики:', e);
            }
        }
    </script>
</body>
</html>
